<#
.SYNOPSIS
    Performs a quick scan using Microsoft Defender and detects malware.

.DESCRIPTION
    This script initiates a quick scan using Microsoft Defender and checks the results for any detected malware.
    If malware is detected, the script outputs the name of the malware and exits with code 1.
    If no malware is detected, the script outputs "No malware detected" and exits with code 0.

.AUTHOR
    Name        : Allester Padovani
    Title       : Senior IT Specialist
    Script Ver. : 1.0
    Date        : 2025-07-19

.NOTES
    Compatibility: Windows 11 24H2 and above
    Usage        : Suitable for local or remote execution.
    Additional Information:
        - The script uses the `Start-MpScan` cmdlet to initiate a quick scan, and the `Get-MpThreatDetection` cmdlet to retrieve scan results.
        - If malware is detected, it exits with code 1, otherwise, it exits with code 0.
        - Ensure that you have administrative privileges to run this script.
#>

# Detection Script: Detect_Malware.ps1

# Perform a quick scan using Microsoft Defender
Start-MpScan -ScanType QuickScan

# Check the scan results
$scanResults = Get-MpThreatDetection

if ($scanResults) {
    Write-Output "Malware detected: $($scanResults.ThreatName)"
    exit 1
} else {
    Write-Output "No malware detected."
    exit 0
}
